(this["webpackJsonpshop-example"]=this["webpackJsonpshop-example"]||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);var n,r=a(13),c=a.n(r),i=a(11),o=a(8),s=a.n(o),u=a(24),d=a(145),j=a(138),p=a(0),l=a(142),b=a(143),h=a(144),m=a(52),O=a(140),f=a(79),x=a.n(f),y=a(78),_=a.n(y),v=a(77),g=a.n(v),C=a(41),w=a(59);function k(e,t){switch(t.type){case n.ADD_TO_CART:var a=e[t.payload.product.id]?e[t.payload.product.id].quantity+t.payload.quantity:t.payload.quantity;return Object(C.a)(Object(C.a)({},e),{},Object(w.a)({},t.payload.product.id,{product:t.payload.product,quantity:a}));case n.REMOVE_ITEM:var r=Object(C.a)({},e);return delete r[t.payload.id],r;case n.EMPTY_CART:return{}}}!function(e){e.ADD_TO_CART="ADD_TO_CART",e.REMOVE_ITEM="REMOVE_ITEM",e.EMPTY_CART="EMPTY_CART"}(n||(n={}));var T=a(3),E=Object(p.createContext)({});E.displayName="CartContext";var A=Object(p.createContext)({});A.displayName="CartActionsContext";var M=function(){return Object(p.useContext)(E)},N=function(){return Object(p.useContext)(A)},R=function(e){var t=e.children,a=Object(p.useReducer)(k,{}),r=Object(i.a)(a,2),c=r[0],o=r[1],s=function(e,t){var a;(a=o,function(e,t){a({type:n.ADD_TO_CART,payload:{product:e,quantity:t}})})(e,t)},u=function(e){var t;(t=o,function(e){t({type:n.REMOVE_ITEM,payload:{id:e}})})(e)},d=function(){var e;(e=o,function(){e({type:n.EMPTY_CART})})()},j={cart:c},l=Object(p.useMemo)((function(){return{addItem:s,removeItem:u,emptyCart:d}}),[]);return Object(T.jsx)(A.Provider,{value:l,children:Object(T.jsx)(E.Provider,{value:j,children:t})})};var S,I=Object(j.a)((function(e){return{controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1)}}})),D=function(e){var t=e.product,a=e.quantity,n=I(),r=N().addItem,c=Object(p.useState)(null!==a&&void 0!==a?a:0),o=Object(i.a)(c,2),s=o[0],u=o[1];return Object(T.jsxs)("div",{className:n.controls,children:[Object(T.jsx)(O.a,{"aria-label":"remove",onClick:function(){s>0&&u(s-1)},children:Object(T.jsx)(g.a,{})}),Object(T.jsx)(m.a,{children:s}),Object(T.jsx)(O.a,{"aria-label":"add",onClick:function(){s<9&&u(s+1)},children:Object(T.jsx)(_.a,{})}),Object(T.jsx)(O.a,{"aria-label":"addToCart",onClick:function(){s>0&&r(t,s)},children:Object(T.jsx)(x.a,{})})]})},P=Object(j.a)((function(){return{root:{display:"flex",margin:"1rem"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},image:{width:150,height:150}}})),q=function(e){var t=e.product,a=P();return Object(T.jsxs)(l.a,{className:a.root,title:t.name,children:[Object(T.jsx)(b.a,{className:a.image,image:t.image}),Object(T.jsxs)("div",{className:a.details,children:[Object(T.jsx)(h.a,{className:a.content,children:Object(T.jsx)(m.a,{paragraph:!0,variant:"h5",children:t.name})}),Object(T.jsx)(D,{product:t})]})]})},V=Object(p.memo)(q),G="https://fakeapi",B={products:function(){return"".concat(G,"/products")}},F={purchase:function(){return"".concat(G,"/purchase")}},J=a(19),L=a(22),Y=a(29),K=a(30),z=a(65),H=function(e){Object(Y.a)(a,e);var t=Object(K.a)(a);function a(){return Object(J.a)(this,a),t.apply(this,arguments)}return Object(L.a)(a,[{key:"init",value:function(){return this.append("Accept","application/json"),this.append("Content-Type","application/json"),this.append("Pragma","no-cache"),this}}]),a}(Object(z.a)(Headers)),U=function(){function e(t,a,n){Object(J.a)(this,e),this.url=void 0,this.method=void 0,this.body=void 0,this.headers=void 0,this.headers=new H,this.url=t,this.method=a,this.body=JSON.stringify(n)}return Object(L.a)(e,[{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return fetch(this.url,{body:this.body,headers:this.headers.init(),method:this.method})}))}]),e}(),W=function(e){return new U(e,"GET")},Q=function(e,t){return new U(e,"POST",t)},X=function(){var e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=B.products(),e.next=3,W(t).fetch();case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=Object(j.a)((function(){return{root:{flexGrow:1,marginTop:10}}})),$=function(){var e=Z(),t=Object(p.useState)([]),a=Object(i.a)(t,2),n=a[0],r=a[1];return Object(p.useEffect)((function(){Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,X();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(T.jsx)(d.a,{container:!0,className:e.root,spacing:2,children:n.map((function(e){return Object(T.jsx)(d.a,{item:!0,xs:6,children:Object(T.jsx)(V,{product:e})},e.id)}))})},ee=Object(p.memo)($),te=a(157),ae=a(154),ne=a(155),re=a(81),ce=a.n(re),ie=a(156),oe=a(159),se=a(148),ue=a(158),de=a(147),je=a(146),pe=a(149),le=a(150),be=a(151),he=a(153),me=a(152),Oe=a(80),fe=a.n(Oe),xe=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=F.purchase(),e.next=3,Q(a,t).fetch();case 3:return n=e.sent,e.abrupt("return",n.ok);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=Object(j.a)((function(){return{empty:{padding:"0 2rem"},item:{width:200}}})),_e=function(e){var t=e.open,a=e.onClose,n=ye(),r=M().cart,c=N(),o=c.removeItem,d=c.emptyCart,j=Object(p.useState)(!1),l=Object(i.a)(j,2),b=l[0],h=l[1],f=Object(p.useState)(!1),x=Object(i.a)(f,2),y=x[0],_=x[1],v=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(r);case 2:e.sent?(d(),h(!0)):_(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){a(),h(!1),_(!1)};return y?Object(T.jsxs)(ue.a,{"aria-labelledby":"cart",open:t,onClose:g,children:[Object(T.jsx)(je.a,{id:"cart",children:"Une erreur est survenue. Veuillez re\xe9essayer."}),Object(T.jsx)(de.a,{children:Object(T.jsx)(se.a,{onClick:function(){h(!1),_(!1)},variant:"contained",color:"primary",children:"R\xe9essayer"})})]}):b?Object(T.jsx)(ue.a,{"aria-labelledby":"cart",open:t,onClose:g,children:Object(T.jsx)(je.a,{id:"cart",children:"Votre commande est termin\xe9e. Merci pour votre achat."})}):Object(T.jsxs)(ue.a,{"aria-labelledby":"cart",open:t,onClose:g,children:[Object(T.jsx)(je.a,{id:"cart",children:"Panier"}),0===Object.values(r).length?Object(T.jsx)(m.a,{paragraph:!0,className:n.empty,children:"Le panier est vide"}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(pe.a,{children:Object.values(r).map((function(e){return Object(T.jsxs)(le.a,{children:[Object(T.jsx)(be.a,{children:Object(T.jsx)(oe.a,{src:e.product.image})}),Object(T.jsx)(me.a,{className:n.item,primary:e.product.name,secondary:"quantit\xe9 : ".concat(e.quantity)}),Object(T.jsx)(he.a,{children:Object(T.jsx)(O.a,{onClick:function(){return o(e.product.id)},"aria-label":"remove",children:Object(T.jsx)(fe.a,{})})})]},e.product.id)}))}),Object(T.jsx)(de.a,{children:Object(T.jsx)(se.a,{onClick:v,variant:"contained",color:"primary","aria-label":"purchase",children:"Commander"})})]})]})},ve=Object(j.a)((function(){return{root:{flexGrow:1},title:{flexGrow:1}}})),ge=(S=function(){var e=ve(),t=M().cart,a=Object(p.useState)(!1),n=Object(i.a)(a,2),r=n[0],c=n[1],o=t&&Object.values(t).reduce((function(e,t){return e+t.quantity}),0);return Object(T.jsxs)("div",{className:e.root,children:[Object(T.jsx)(ae.a,{position:"static",children:Object(T.jsxs)(ne.a,{children:[Object(T.jsx)(m.a,{variant:"h6",className:e.title,children:"Shop Example"}),Object(T.jsx)(O.a,{"aria-label":"open-cart",color:"inherit","aria-controls":"menu-appbar",onClick:function(){c(!0)},children:Object(T.jsx)(ie.a,{badgeContent:o,color:"secondary",children:Object(T.jsx)(ce.a,{})})})]})}),Object(T.jsx)(te.a,{maxWidth:"md",children:Object(T.jsx)(ee,{})}),Object(T.jsx)(_e,{open:r,onClose:function(){c(!1)}})]})},function(e){return Object(T.jsx)(R,{children:Object(T.jsx)(S,Object(C.a)({},e))})}),Ce=a(32),we=a(70),ke=a(23),Te=a(82),Ee=[ke.c.get(B.products(),(function(e,t,a){return t(a.delay(0),a.status(200),a.json(Te))})),ke.c.post(F.purchase(),(function(e,t,a){return t(a.delay(0),a.status(200))}))];we.a.apply(void 0,Object(Ce.a)(Ee)).start(),c.a.render(Object(T.jsx)(ge,{}),document.getElementById("root"))},82:function(e){e.exports=JSON.parse('[{"id":"fb16ef1f-e6a5-47ab-a119-11d578462cfd","name":"Pomme","image":"https://upload.wikimedia.org/wikipedia/commons/thumb/8/88/Idared_pomme.jpg/800px-Idared_pomme.jpg"},{"id":"0b2db7be-2bef-4cf5-93dc-183218d49305","name":"Kiwi","image":"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/Kiwi_%28Actinidia_chinensis%29_1_Luc_Viatour.jpg/1920px-Kiwi_%28Actinidia_chinensis%29_1_Luc_Viatour.jpg"},{"id":"877ddc28-e90f-4c35-a53b-8792de83e8ae","name":"Cerise","image":"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Cherry_sweet_cherry_red_fruit_167341.jpg/1200px-Cherry_sweet_cherry_red_fruit_167341.jpg"},{"id":"e968169c-7818-4716-971c-f128562f27b9","name":"Fraise","image":"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Garden_strawberry_%28Fragaria_%C3%97_ananassa%29.jpg/257px-Garden_strawberry_%28Fragaria_%C3%97_ananassa%29.jpg"},{"id":"c912558f-0371-4060-a5c8-0c7116f52e99","name":"Banane","image":"https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Bananas_white_background_DS.jpg/220px-Bananas_white_background_DS.jpg"},{"id":"0e6edefd-ae5f-4b73-a2e0-894a222be023","name":"Melon","image":"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b1/Canteloupe_and_cross_section.jpg/290px-Canteloupe_and_cross_section.jpg"}]')}},[[102,1,2]]]);
//# sourceMappingURL=main.ee230e19.chunk.js.map
